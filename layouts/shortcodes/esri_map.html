<!--
    ESRI map with basemap Layer and feature layer.
    Uses esri_leaflet from https://github.com/Esri/esri-leaflet
-->
<!DOCTYPE html>
<html>
<head>
    <!-- Load Leaflet from CDN -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css"
        integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
        crossorigin=""
    />

    <script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"
        integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg=="
        crossorigin="">
    </script>

    <!-- Load Esri Leaflet from CDN -->

    <script src="https://unpkg.com/esri-leaflet@2.2.4/dist/esri-leaflet.js"
        integrity="sha512-tyPum7h2h36X52O2gz+Pe8z/3l+Y9S1yEUscbVs5r5aEY5dFmP1WWRY/WLLElnFHa+k1JBQZSCDGwEAnm2IxAQ=="
        crossorigin="">
    </script>

    <style>
        /* body { margin:0; padding:0; } */
        /* #map { position: absolute; top:0; bottom:0; right:0; left:0; } */
        #map {
            margin:0; padding:0;  width : 100%; height : 500px; position: fixed;
        }
    </style>
</head>
<body>
    <div id="map"></div>

    <script>
      var map = L.map("map").setView(
        [{{.Get "lat" }}, {{.Get "lon" }}], {{.Get "zoom" }}
      );

      L.esri.basemapLayer('{{.Get "basemap" }}').addTo(map);

      // === feature layers:
      // arcgis/rest/services/Heritage_Trees_Portland/FeatureServer/0
      // var parks = L.esri.featureLayer({
      //     url: '{{.Get "feature_url" }}',
      //     style: function () {
      //       return { color: "#70ca49", weight: 2 };
      //     }
      // }).addTo(map);
      //
      // var popupTemplate = "<h3>{NAME}</h3>{ACRES} Acres<br><small>Property ID: {PROPERTYID}<small>";
      //
      // parks.bindPopup(function(e){
      //     return L.Util.template(popupTemplate, e.feature.properties)
      // });

      // === tiled layers
      // ArcGIS/rest/services/USA_Topo_Maps/MapServer
      // L.esri.tiledMapLayer({
      //     url: '{{.Get "feature_url" }}'
      // }).addTo(map);

      // === dynamic map layers
      // arcgis/rest/services/Specialty/Soil_Survey_Map/MapServer
      L.esri.dynamicMapLayer({
          url: '{{.Get "feature_url" }}',
          opacity: 1.0
      }).addTo(map);

      // === image map layer
      // arcgis/rest/services/Landsat/PS/ImageServer
      // L.esri.imageMapLayer({
      //     url: '{{.Get "feature_url" }}',
      //     // attribution: 'United States Geological Survey (USGS), National Aeronautics and Space Administration (NASA)'
      // }).addTo(map);
    </script>
</body>
</html>
